@startuml SmartGarden_ClassDiagram

' Core Domain Classes
package "Model" {
    abstract class Plant {
        - position: Position
        - growthStage: GrowthStage
        - healthLevel: int
        - waterLevel: int
        - daysAlive: int
        - maxLifespan: int
        - waterRequirement: int
        - sunlightRequirement: int
        - minTemperature: int
        - maxTemperature: int
        - pestResistance: int
        - isDead: boolean
        
        + grow(): void
        + water(amount: int): void
        + takeDamage(amount: int): void
        + heal(amount: int): void
        + updateStatus(): void
        + die(): void
        + getHealthPercentage(): double
        + {abstract} getGrowthDuration(): int
    }
    
    class Flower {
        - bloomColor: String
        + getGrowthDuration(): int
    }
    
    class Vegetable {
        - harvestYield: int
        + getGrowthDuration(): int
    }
    
    class Tree {
        - height: int
        + getGrowthDuration(): int
    }
    
    class Grass {
        - coverage: int
        + getGrowthDuration(): int
    }
    
    class Herb {
        - aromaStrength: int
        + getGrowthDuration(): int
    }
    
    class Garden {
        - rows: int
        - columns: int
        - plants: List<Plant>
        - zones: List<Zone>
        - creationTime: LocalDateTime
        
        + addPlant(plant: Plant): boolean
        + removePlant(position: Position): boolean
        + getPlant(position: Position): Plant
        + getAllPlants(): List<Plant>
        + isPositionEmpty(position: Position): boolean
    }
    
    class Zone {
        - zoneId: int
        - boundaries: List<Position>
        - moistureLevel: int
        - temperature: int
        - pestInfestationLevel: int
        - plantsInZone: List<Plant>
        
        + addPlant(plant: Plant): void
        + removePlant(plant: Plant): void
        + updateMoisture(amount: int): void
        + updateTemperature(newTemp: int): void
        + getPlantsNeedingWater(): List<Plant>
    }
    
    class Position {
        - row: int
        - column: int
        + equals(other: Position): boolean
        + hashCode(): int
    }
    
    enum GrowthStage {
        SEED
        SEEDLING
        MATURE
        FLOWERING
        FRUITING
    }
}

package "System" {
    class WateringSystem {
        - waterSupply: int
        - activeZones: Set<Integer>
        - moistureThreshold: int
        - sprinklers: Map<Integer, Sprinkler>
        
        + checkMoistureLevels(): void
        + waterZone(zoneId: int): void
        + calculateWaterNeeded(zone: Zone): int
        + updateSupply(amount: int): void
        + isWaterAvailable(): boolean
    }
    
    class Sprinkler {
        - zoneId: int
        - flowRate: int
        - isActive: boolean
        - lastActivation: LocalDateTime
        
        + activate(): void
        + deactivate(): void
        + distributeWater(amount: int, zone: Zone): void
    }
    
    class HeatingSystem {
        - currentTemperature: int
        - targetMinTemperature: int
        - targetMaxTemperature: int
        - heatingMode: HeatingMode
        - energyConsumption: int
        
        + monitorTemperature(): void
        + adjustHeating(): void
        + applyWarmthToPlants(plants: List<Plant>): void
        + getStatus(): String
    }
    
    enum HeatingMode {
        OFF
        LOW
        MEDIUM
        HIGH
    }
    
    class PestControlSystem {
        - pesticideStock: int
        - detectionSensitivity: int
        - treatmentThreshold: int
        - activeTreatments: Set<Integer>
        - pests: List<Pest>
        
        + detectPests(zone: Zone): void
        + assessThreat(zone: Zone): ThreatLevel
        + applyTreatment(zone: Zone): void
        + spawnPests(): void
        + reducePestCount(zone: Zone, amount: int): void
    }
    
    abstract class Pest {
        - pestType: String
        - damageRate: int
        - position: Position
        
        + {abstract} causeDamage(plant: Plant): void
        + {abstract} isBeneficial(): boolean
    }
    
    class HarmfulPest {
        + causeDamage(plant: Plant): void
        + isBeneficial(): boolean
    }
    
    class BeneficialInsect {
        - pollinationBonus: int
        + causeDamage(plant: Plant): void
        + isBeneficial(): boolean
        + pollinate(plant: Plant): void
    }
    
    enum ThreatLevel {
        LOW
        MEDIUM
        HIGH
        CRITICAL
    }
    
    abstract class Sensor {
        - sensorId: String
        - zoneId: int
        - lastReading: LocalDateTime
        - status: SensorStatus
        
        + {abstract} readValue(): int
        + calibrate(): void
        + reportStatus(): SensorStatus
    }
    
    class MoistureSensor {
        + readValue(): int
    }
    
    class TemperatureSensor {
        + readValue(): int
    }
    
    class PestDetector {
        + readValue(): int
    }
    
    enum SensorStatus {
        ACTIVE
        INACTIVE
        ERROR
    }
}

package "Simulation" {
    class SimulationEngine {
        - currentTime: LocalDateTime
        - tickInterval: int
        - speedMultiplier: int
        - state: SimulationState
        - elapsedTicks: long
        - timeline: Timeline
        
        + start(): void
        + pause(): void
        + resume(): void
        + stop(): void
        + tick(): void
        + setSpeed(multiplier: int): void
        + updateAllSystems(): void
        + triggerRandomEvents(): void
    }
    
    enum SimulationState {
        STOPPED
        RUNNING
        PAUSED
    }
    
    class WeatherSystem {
        - currentWeather: Weather
        - weatherDuration: int
        - nextWeather: Weather
        - temperatureModifier: int
        - moistureModifier: int
        
        + changeWeather(): void
        + applyEffects(plants: List<Plant>): void
        + generateForecast(): Weather
        + getCurrentWeather(): Weather
    }
    
    enum Weather {
        SUNNY
        RAINY
        CLOUDY
        WINDY
        SNOWY
    }
    
    class EventScheduler {
        - scheduledEvents: PriorityQueue<Event>
        
        + scheduleEvent(event: Event, delay: int): void
        + processEvents(): void
        + clearEvents(): void
    }
    
    class Event {
        - eventType: EventType
        - scheduledTime: LocalDateTime
        - parameters: Map<String, Object>
        
        + execute(): void
    }
    
    enum EventType {
        PEST_OUTBREAK
        WEATHER_CHANGE
        EQUIPMENT_CHECK
        PLANT_GROWTH
    }
}

package "Util" {
    class Logger {
        - logFilePath: Path
        - sessionId: String
        - buffer: List<LogEntry>
        - logLevel: LogLevel
        
        + log(level: LogLevel, message: String): void
        + flush(): void
        + rotateLogs(): void
        + query(filter: Predicate): List<LogEntry>
    }
    
    class LogEntry {
        - timestamp: LocalDateTime
        - level: LogLevel
        - category: String
        - message: String
        
        + toString(): String
    }
    
    enum LogLevel {
        DEBUG
        INFO
        WARNING
        ERROR
    }
    
    class Configuration {
        - properties: Properties
        
        + loadConfig(path: String): void
        + get(key: String): String
        + set(key: String, value: String): void
        + saveConfig(): void
    }
}

package "Controller" {
    class GardenController {
        - garden: Garden
        - simulationEngine: SimulationEngine
        - wateringSystem: WateringSystem
        - heatingSystem: HeatingSystem
        - pestControlSystem: PestControlSystem
        - weatherSystem: WeatherSystem
        - logger: Logger
        
        + startSimulation(): void
        + pauseSimulation(): void
        + stopSimulation(): void
        + plantSeed(type: String, position: Position): void
        + setSimulationSpeed(multiplier: int): void
        + manualWaterZone(zoneId: int): void
        + getGardenState(): GardenState
    }
    
    class MainViewController {
        - gardenController: GardenController
        - gardenGrid: GridPane
        - logListView: ListView
        - statusLabels: Map<String, Label>
        
        + initialize(): void
        + handleStartButton(): void
        + handlePauseButton(): void
        + handleStopButton(): void
        + handlePlantSelection(): void
        + updateUI(): void
    }
}

' Relationships
Plant <|-- Flower
Plant <|-- Vegetable
Plant <|-- Tree
Plant <|-- Grass
Plant <|-- Herb

Pest <|-- HarmfulPest
Pest <|-- BeneficialInsect

Sensor <|-- MoistureSensor
Sensor <|-- TemperatureSensor
Sensor <|-- PestDetector

Garden "1" *-- "0..*" Plant : contains
Garden "1" *-- "1..*" Zone : divided into
Zone "1" o-- "0..*" Plant : manages
Plant "1" -- "1" Position : located at
Plant "1" -- "1" GrowthStage : has

WateringSystem "1" o-- "1..*" Sprinkler : controls
WateringSystem "1" -- "1..*" MoistureSensor : reads from
WateringSystem "1" -- "1..*" Zone : manages

HeatingSystem "1" -- "1..*" TemperatureSensor : monitors
HeatingSystem "1" -- "1" HeatingMode : operates in

PestControlSystem "1" *-- "0..*" Pest : tracks
PestControlSystem "1" -- "1..*" PestDetector : uses
PestControlSystem "1" -- "1..*" Zone : monitors

SimulationEngine "1" -- "1" Garden : controls
SimulationEngine "1" -- "1" WeatherSystem : uses
SimulationEngine "1" -- "1" EventScheduler : schedules with
SimulationEngine "1" -- "1" SimulationState : has

WeatherSystem "1" -- "1" Weather : current
WeatherSystem "1" -- "0..*" Plant : affects

EventScheduler "1" *-- "0..*" Event : manages
Event "1" -- "1" EventType : of type

Logger "1" *-- "0..*" LogEntry : contains
LogEntry "1" -- "1" LogLevel : has

GardenController "1" -- "1" Garden : manages
GardenController "1" -- "1" SimulationEngine : controls
GardenController "1" -- "1" WateringSystem : controls
GardenController "1" -- "1" HeatingSystem : controls
GardenController "1" -- "1" PestControlSystem : controls
GardenController "1" -- "1" Logger : logs to

MainViewController "1" -- "1" GardenController : uses

Sensor "1" -- "1" Zone : monitors
Sensor "1" -- "1" SensorStatus : has status

@enduml

